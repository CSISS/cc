<!DOCTYPE html>
<html   xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="frame">
  <head>
    
    <title>User Profile</title>
	
	<link rel="stylesheet"  href="../css/loginstyle.css" th:href="@{../css/loginstyle.css}"/>
	
	<link rel="stylesheet" href="../css/user-profile.css" th:href="@{../css/user-profile.css}"/>
	
	<link rel="stylesheet"  href="../css/dataTables.bootstrap.min.css" th:href="@{../css/dataTables.bootstrap.min.css}"/>
	
	<script type="text/javascript" src="../js/jquery.dataTables.min.js"  th:src="@{../js/jquery.dataTables.min.js}" ></script>
	
	<script type="text/javascript" src="../js/dataTables.bootstrap.min.js" th:src="@{../js/dataTables.bootstrap.min.js}"></script>

	
  </head>

  <body>
	
	<!--body-->
    <div class="clearfix" layout:fragment="content">
    	
		<div class="sec-heading font-default">
	        
	    </div>
	    
		<section class="container font-default">
	        
	        <div class="row">
	        
		        <div class="col-lg-12">
	        			
					    <!-- <div class="card hovercard">
					        <div class="card-background">
					            <img class="card-bkimg" alt="" src="http://lorempixel.com/100/100/people/9/" />
					        </div>
					        <div class="useravatar">
					            <img alt="" src="../images/userprofile.png" />
					        </div>
					        <div class="card-info"> 
					        	<span class="card-title" th:text="${user.name}">Pamela Anderson</span>
					        </div>
					    </div> -->
					    <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
					        <div class="btn-group" role="group">
					            <button type="button" id="infobtn" class="btn btn-primary" href="#tab1" data-toggle="tab"><span class="glyphicon glyphicon-user" aria-hidden="true"></span>
					                <div class="hidden-xs">Account</div>
					            </button>
					        </div>
					        <div class="btn-group" role="group">
					            <button type="button" id="orderbtn" class="btn btn-default" href="#tab2" data-toggle="tab"><span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
					                <div class="hidden-xs">Orders</div>
					            </button>
					        </div>
					        <div class="btn-group" role="group">
					            <button type="button" id="resourcebtn" class="btn btn-default" href="#tab3" data-toggle="tab"><span class="glyphicon glyphicon-star" aria-hidden="true"></span>
					                <div class="hidden-xs">Resources</div>
					            </button>
					        </div>
					    </div>
					
					    <div class="well">
						      
						      <div class="tab-content">
						      
						      		<!-- Tab for User Information -->
						      
							        <div class="tab-pane fade in active" id="tab1">
							          
									          	<form class="form-horizontal">
													
													<fieldset>
														
														<div class="form-group">
														
															<div class="col-md-4" >
															
																<legend>User Information</legend>
															
															</div>
															
															<div class="col-md-8">
															
																<a type="button" class="btn btn-primary  pull-right" th:href="@{/web/user_edit}">
								                                    <span class="glyphicon glyphicon-plus"
								                                          aria-hidden="true"></span>
								                                    Edit
								                                </a>

								                                <!-- <a type="button" class="btn btn-primary  pull-right" th:href="@{/web/user_edit}">
								                                    <span class="glyphicon glyphicon-plus"
								                                          aria-hidden="true"></span>
								                                    Security
								                                </a> -->
															
															</div>
															
														</div>
														
														<!-- Text input-->
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Name</label>
														  	  
														  	<label class="col-md-5 control-content " th:text="${user.name}">Jensen Sun</label>
														  		
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Full Name</label>
														  	  
														  	<label class="col-md-5 control-content" th:text="${user.fullname}">Jensen Sun</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Registration Date</label>
														  	  
														  	<label class="col-md-5 control-content " th:text="${user.reg_time}">2017-01-01</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Department</label>
														  	  
														  	<label class="col-md-5 control-content" th:text="${user.department}">CSISS</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Institute</label>
														  	  
														  	<label class="col-md-5 control-content" th:text="${user.institute}">George Mason University</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Address</label>
														  	  
														  	<label class="col-md-5 control-content" th:text="${user.address}">4087 University Dr STE 3100, Fairfax, VA, 22030</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >E-mail</label>
														  	  
														  	<label class="col-md-5 control-content " th:text="${user.email}">zsun@gmu.edu</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Phone</label>
														  	  
														  	<label class="col-md-5 control-content " th:text="${user.phone}">703-993-6124</label>
														  	
														</div>
														
														<div class="form-group">
															
														  	<label class="col-md-4 control-label" >Status</label>
														  	  
														  	<label class="col-md-5 control-content " th:text="${user.status}">active</label>
														  	
														</div>
													
													</fieldset>
													
												</form>
							          
							        </div>
							        
							        <!-- Tab for User Orders -->
							        
							        <div class="tab-pane fade in" id="tab2">
							         
							         	
							         	<div>
							         	
							         		<div class="row">
							         		
										        <nav class="navbar navbar-default">
										    
										            <div class="container">
										    
										    			<div class="row">
										    			
										    				<div class="navbar-header col-xs-4">
										    				
											                    <span class="text-black navbar-brand ">Your Orders</span>
											    
											                </div>
											    
											                <p class="text-black navbar-text align-middle col-xs-8 ">Here you can find all the orders you have placed.</p>
											    			
										    			</div>
										    
										    
										                
												      	
										    
										            </div>
										    
										        </nav>
										    
										    </div>

											<div class="panel panel-default">
													
												  <div class="panel-body" style="padding:5px" th:fragment="orderlist">
												  		
										                <br/>
												  
												  		<div class="row" >
												  		
												  			<div class="col-xs-12">
												
															        <a class="btn btn-success pull-left" th:href="@{/web/productsearch}"><span>New</span></a>
															        
															        <a class="btn btn-default pull-right" th:href="@{/web/user_profile?show=tab2}" ><span>Refresh</span></a>
															        
															        <!-- 
															        
																        <a class="btn btn-default"><span>Edit</span></a>
																        
																        <a class="btn btn-default"><span>Delete</span></a>														        
															        
															         -->
															        
															        
													      	</div>
												  		
												  		</div>
													  	
												      	<br/>
												
													  	<table id="ordertable" class="table table-striped table-bordered" style="margin:0px">
												
															    <thead>
												
															    	<tr>
												
																        <th>Order Id</th>
													
																        <th>Product Name</th>
													
																        <th>Begin Time</th>
													
																        <th>Status</th>
													
																        <th style="width:100px">Actions</th>
												
															        </tr>
												
																</thead>
												
																<tbody>
																	
																	<tr th:each="order : ${user.orders}">
																		
																		<td class="text-black" ><span th:text="${order.orderid}">1234567898</span> <span th:if="${order.cron != null} " class="label label-primary">recurring</span></td>
												
																		<td class="text-black" th:text="${order.product}">Customized VCI</td>
												
																		<td class="text-black" th:text="${order.begintime}">2017-02-02 16:21</td>
												
																		<td class="center"  >
																		
																			<th:block th:switch="${order.status}">
																			
																			  <div th:case="'Ready'">
																			  
																				<span class="label label-primary">Ready</span>
																			
																			  </div>
																			
																			  <div th:case="'Done'">
																			  
																				<span class="label label-success">Done</span>
																			
																			  </div>
																			
																			  <div th:case="'Failed'">
																			
																				<span class="label label-danger">Failed</span>
																			
																			  </div>
																			
																			  <div th:case="'Running'">
																			
																				<span class="label label-info">Running</span>
																			
																			  </div>
																			
																			</th:block>
																			
																		</td>
												
																		<td>
												
																		    <button type="button" th:id="'view_' + ${order.orderid}" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" title="View Order Details">
												
																		    	<span class="glyphicon glyphicon-pencil"></span>
												
																			</button>
																			
																			<button type="button" th:id="'repeat_'+ ${order.orderid}" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" data-original-title="Repeat"  title="Repeat This Order">
												
																			    <span class="glyphicon glyphicon-repeat"></span>
												
																			</button>
												
																			<button type="button" th:id="'delete_'+ ${order.orderid}" class="remove-news btn btn-xs btn-default" data-toggle="tooltip" data-placement="top" data-original-title="Delete"  title="Delete This Order">
												
																			    <span class="glyphicon glyphicon-trash"></span>
												
																			</button>
													
																		</td>
												
																	</tr>
																	
																</tbody> 
												
														</table>
												
												</div>
												
												<div class="panel-footer">
												
												    <!-- Remove for now, maybe reopen sometime - Ziheng 2/15/2017 -->
												    
												    <!-- 
												    
													    <div class="col-xs-3">
													
													    	<div class="dataTables_info" id="example_info">1-10 of 100</div>
													
													    </div>
													
													    <div class="col-xs-6">
													
															<div class="dataTables_paginate paging_bootstrap">
													
																<ul class="pagination pagination-sm" style="margin:0 !important">
													
																	<li class="prev disabled"><a href="#">← Previous</a></li>
													
																	<li class="active"><a href="#">1</a></li>
													
																	<li><a href="#">1</a></li>
													
																	<li><a href="#">2</a></li>
													
																	<li><a href="#">3</a></li>
													
																	<li class="next disabled"><a href="#">Next → </a></li>
													
																</ul>
													
															</div>
													
														</div>
													
														<div class="btn-group">
													
														  	<button type="button" class="btn btn-sm btn-default dropdown-toggle" data-toggle="dropdown">
													
														    10 <span class="caret"></span>
													
														  	</button>
													
														  	<ul class="dropdown-menu" role="menu" style="min-width: 0px ">
													
														    	<li><a href="#">5</a></li>
													
														    	<li class="active"><a href="#">10</a></li>
													
														    	<li><a href="#">15</a></li>
													
														    	<li><a href="#">15</a></li>
													
														  	</ul>
													
														  	<span>items per page </span>
													
														</div>
												    
												     -->
												    
											  	</div>
											
											</div>
											
											<div class="row">
										    
										        <nav class="navbar navbar-default">
										    
										            <div class="container-fluid">
										    
										                <p class="navbar-text text-black">Want to search and order a product? Go <a class="btn btn-default" th:href="@{/web/productsearch}">here</a></p>
										    
										            </div>
										    
										        </nav>
										    
										    </div>
											
										</div>
										
							        </div>
							        
							        <!-- Tab for User Resources -->
							        
							        <div class="tab-pane fade in" id="tab3">
							          
							          <div>
										    
										    <div class="row">
										    
										        <nav class="navbar navbar-default">
										    
										            <div class="container">
										    
										                <div class="navbar-header">
										    
										                    <span class="navbar-brand text-black">Your Resources</span>
										    
										                </div>
										    
										                <p class="navbar-text text-black">Only the services and VDPs you have registered are displayed.</p>
										    
										            </div>
										    
										        </nav>
										    
										    </div>
										    
										    <div class="row">
										    
										        <div class="col-md-12">
										    
										            <div class="panel panel-default panel-table">
										    			
										                <br/>
										                
									                    <div class="row">
									    					
									    					<div class="col col-xs-6">
										                            <div class="pull-left">
										                                <a type="button" class="btn btn-primary" th:href="@{/web/servicetypeselect}">
										                                    <span class="glyphicon glyphicon-plus"
										                                          aria-hidden="true"></span>
										                                    New Service
										                                </a>
										                                
										                                <a type="button" class="btn btn-primary" href="/VDP">
										                                    <span class="glyphicon glyphicon-plus"
										                                          aria-hidden="true"></span>
										                                    New Product
										                                </a>
										                            </div>
										                        </div>
									    					
									                        <div class="col col-xs-6">
									    
									                            <div class="pull-right">
									    
									                                <div class="btn-group" data-toggle="buttons">
									    
									                                    <label class="btn btn-warning btn-filter" data-target="service">
									    
									                                        <input type="radio" name="options" id="option1" autocomplete="off"  /> Service
									    
									                                    </label>
									    
									                                    <label class="btn btn-warning btn-filter" data-target="product">
									    
									                                        <input type="radio" name="options" id="option2" autocomplete="off" /> VDP
									    
									                                    </label>
										    							
									                                    <label class="btn btn-warning btn-filter active" data-target="all">
									    
									                                        <input type="radio" name="options" id="option3" autocomplete="off" /> All
									    
									                                    </label>
									    
									                                </div>
									    
									                            </div>
									    
									                        </div>
									                        
									    
									                    </div>
										                
										                <br/>
										    			
										                <div class="panel-body">
										    
										                    <table id="mytable" class="table table-striped table-bordered table-list">
										    
										                        <thead>
										    
											                        <tr>
											    
											                            <th class="hidden-xs">ID</th>
											    
											                            <th class="col-text">Name</th>
											    
											                            <th class="col-text">Date</th>
											    
											    						 <th class="col-tools">
											    
											                            	<span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
											    
											                            </th>
											    
											                        </tr>
										    
										                        </thead>
										    
										                        <tbody>
																	
											                        <tr data-status="service" th:each="service : ${user.services}">
																		
											                            <td class="hidden-xs" >
											                            
											                            	<span th:text="${service.id}">123456789</span>
											                            	 
											                                <span class="label label-success">service</span>
											                                
											                            </td>
											                            
											                            <td th:text="${service.name}">Service</td>
											                            
											                            <td th:text="${service.registerdate}">2017-02-02</td>
											                            
											                            <td align="center">
											
											                                <!-- 
											                                
											                                <a class="btn btn-default">
											
											                                	<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
											
											                                </a>
											                                
											                                 -->
											                                 
											                            	
											                            	<a class="round round-sm hollow green" target="_blank" th:href="${service.accessurl}">
											                            	
											                                	<span class="glyphicon glyphicon-magnet" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Visit Service Address"></span>
											                            	
											                                </a>
											                                
											                                <a class="round round-sm hollow green"   th:id="'updateservice_' + ${service.id.replaceAll(':', '__')}">
											                            	
											                                	<span class="glyphicon glyphicon-refresh" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Update database if service is changed"></span>
											                            	
											                                </a>
											                            	
											                                <a class="round round-sm hollow green" th:id="'delservice_' + ${service.id.replaceAll(':', '__')}">
											                            	
											                                	<span class="glyphicon glyphicon-trash" aria-hidden="true"  data-toggle="tooltip" data-placement="top" title="Delete Service"></span>
											                            	
											                                </a>
											                            	
											                            </td>
											                        	
											                        </tr>
											                        
											                        <tr data-status="product" th:each="product : ${user.products}">
											                            
											                            <td class="hidden-xs">
											                            	
											                            	<span  th:text="${product.id}">123456789</span>
											                            	
											                            	<span class="label label-primary">product</span>
											                            	
											                            </td>
											                            
											                            <td th:text="${product.name}">Service</td>
											                            
											                            <td th:text="${product.begintime}">2017-02-02</td>
											                            
											                            <td align="center">
											                            
											                                <!-- 
											                                
											                                <a class="btn btn-default">
											                            
											                                	<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
											                            
											                                </a>
											                                
											                                 -->
											                            	
											                                <a class="btn btn-danger" th:id="'delproduct_' + ${product.id}" >
											                            
											                                	<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
											                            
											                                </a>
											                            
											                            </td>
											                        
											                        </tr>
											                        
										                        </tbody>
										                    
										                    </table>
										
										                </div>
										                
										                <div class="panel-footer">
										                    
										                </div>
										    
										            </div>
										    
										        </div>
										    
										    </div>
										    
										    <div class="row">
										    
										        <nav class="navbar navbar-default">
										    
										            <div class="container-fluid">
										    			
										    			<p class="navbar-text">Want to see the public products registered by other users? Go <a class="btn btn-default" th:href="@{/web/productsearch}" >here</a></p>
										    
										    			<p class="navbar-text">Want to see the public services registered by other users? Go <a class="btn btn-default" th:href="@{/web/servicesearch}" >here</a></p>
										    
										            </div>
										    
										        </nav>
										    
										    </div>
										
										</div>
							        
							        </div>
						      
						      </div>
					    
					    </div>
					    
	        	</div>
	        
	        </div>
       
       </section>
       
    </div> <!-- /container -->
    
	
	
	<th:block layout:fragment="script">
		
		<script type="text/javascript"  src="../js/login.js" th:src="@{../js/cc.profile.js}" ></script>
		
		<script th:inline="javascript">
		/*<![CDATA[*/
		
		cc.profile.initTab();
		           
		var orderlist = [[${user.orders}]];
		
		cc.profile.initOrders(orderlist);
		
		var servicelist = [[${user.services}]];
		
		cc.profile.initServices(servicelist);
		
		var productlist = [[${user.products}]];
		
		cc.profile.initProducts(productlist);
		
		//show the specified tab
		
		var tabtag = [[${fronttab}]];
		
		cc.profile.showSpecifiedTab(tabtag);
		
		//set regular refresh on order table
		
		cc.profile.startRefresh();
		
		/*]]>*/
		</script>
		
	
	</th:block>
	
  </body>
</html>
